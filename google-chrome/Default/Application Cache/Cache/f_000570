rBc.prototype.JN=W(1338,function(){if(!this.isDisposed()){var a=this.Ea("waffle-dbsource-pill-menuitem-refreshquery-info-message"),b=Ee("Estimating\u2026");Le(a,b);this.sb()&&(P(a,!0),a=this.Ea("waffle-dbsource-pill-menuitem-refreshquery-info-error-button"),P(a,!1))}});tBc.prototype.JN=W(1337,function(){this.C["refresh-query"].JN()});CBc.prototype.JN=W(1336,function(){this.C.JN()});function GXg(a){var b=bL.getInstance();b.D=a;b.C&&b.D.mE(b.C)}
function HXg(a,b){return new Qp(function(c,d){Zq(Hl(Il(Gl($q(Fl(a.C.We("/answers/tablemetadata"),"did",b),"POST"),2),function(e){var f=new vl;f.ih=!0;e=f.Od(Pfc.getDescriptor(),e.Me());c(e)}),function(){d()})).Pe()})}function IXg(a,b,c){var d=new vl;d.ih=!0;var e=d.qb(b);return new Qp(function(f,h){wo(c,function(){cL(a,"/dbx/validateCalculatedColumn",[],e,function(k){k=d.Od(WK.getDescriptor(),k.Me());f(k)},function(){var k=new WK,l=new dh;D(k,1,l);l.Ub(3);D(l,2,31);h(k)})})})}
function JXg(a,b,c){var d=new vl;d.ih=!0;var e=d.qb(b);return new Qp(function(f,h){wo(c,function(){cL(a,"/dbx/refreshObject",a.F?["esid",a.F]:[],e,function(k){d.ih=!1;k=d.Od(Bec.getDescriptor(),k.Me());f(k)},function(){var k=new Bec,l=new dh;l.Ub(3);D(l,2,31);var n=new SK;D(n,1,l);Ng(k,2,n);h(k)})})})}function KXg(a,b){var c=new Set;b.forEach(function(d){a.O.add(d);c.add(d)});ohc(a,c,"dbobjectmodel-event-update")}function LXg(a){a.od&&a.od.Zc(a.Ka(),a.O?5:1,new Pm(0,a.O?50:0,12,a.O?0:50))}
function MXg(a,b,c,d,e,f,h,k){bN.call(this,a,b,c,d,e,k);this.F=new CBc(h,d.kc(),k);this.Fa(this.F,!0);this.H=f;this.C=null}t(MXg,bN);MXg.prototype.Aa=function(){var a=this.oa().Aa("DIV","waffle-dbsource-container");this.jb(a)};MXg.prototype.Ga=function(){bN.prototype.Ga.call(this);this.C=new nC(this.Ka(),this.oa());oC(this.C)};MXg.prototype.vd=function(){Jf(this.C);bN.prototype.vd.call(this)};
MXg.prototype.focus=function(){var a=this.F;a.D.isVisible()&&a.D.isEnabled()&&(a.D.Ka().focus(),a.D.hs(!0));this.H.Ub(2)};function NXg(a){return a.D?Object.values(a.D).find(function(b){if(!(b instanceof OO))return!1;b=b.getElement();return!!b&&!!b.querySelector(":hover")})||null:null}function OXg(a){return(a=NXg(a.J))?a.Zd().getId():null}function PXg(a){return(a=OXg(a))?ritz_api.BigSheetsApi.getExternalDataIdForObject(a):null}
function QXg(a){for(var b=a.J.C,c=b.length-1;0<=c;c--){var d=UO(a.J,b[c]).Zd();if(d instanceof KM&&null!=d.D&&(d=d.getId(),ritz_api.BigSheetsApi.getExternalDataIdForObject(d)))return d}return null}function RXg(a){var b=a.L.C.C;if(HG(b))return ritz_api.BigSheetsApi.getExternalDataIdForDatasourceSheet(b.gb());(b=PXg(a))||(b=(b=iPc(a))?jPc(a,b):null);if(b||(b=(b=QXg(a))?ritz_api.BigSheetsApi.getExternalDataIdForObject(b):null))return b;b=rJ(a.Ra());return jPc(a,b)}
function SXg(a,b){[a.J,a.V].forEach(function(c){return c.setPosition(b)});a.C.some(function(c){c.C.setPosition(b)})}var TXg={2:Qka,3:Tha};function UXg(a,b,c){this.D=a;this.C=b;this.F=c}UXg.prototype.Es=g("D");function VXg(){var a=new SC,b="Configure a project in the Google Cloud Platform console to continue. "+(a.cd("a",{"class":"goog-inline-block",href:"https://connectedsheets.page.link/addproject",target:"_blank"})+("Learn more"+a.$c("a")));return a.format(b)}
function WXg(a,b){return{title:a,body:b}}function w4(a){return WXg("Query failed",a)}function XXg(a){return a?Qif[a]||"other":"other"}
function YXg(a,b){var c=b.getErrorCode();b=b.Dn();if(0==a)return w4(Nif(b));switch(c){case 36:case 20:return w4(Gif(3,b));case 37:return w4(Hif(b));case 6:return a=(new wB("{objectType, select, chart {The data source took too long to return this chart. Please try again.} pivot_table {The data source took too long to return this pivot table. Please try again.} formula {The data source took too long to return this formula result. Please try again.} record {The data source took too long to return this extract. Please try again.} datasource_preview {The data source took too long to return this preview. Please try again.} other {The data source took too long to return data. Please try again.}}")).format({objectType:XXg(a)}),WXg("Timed out",
Iif(a,b));case 8:c=Rif.format(z(y(),"febpr")?5E4:3E4);var d=Rif.format(z(y(),"femdrr")?5E4:25E3);c=(new wB("{objectType, select, chart {Results exceed {maxRows} rows. Update this chart and try again.}pivot_table {Update the number of rows and/or columns to a maximum of {dbPivotTableMaxRows} by using filtering, grouping, or customizing number of rows and/or columns. Then, try again.}formula {Results exceed {maxRows} rows. Update this function and try again.} record {Results exceed {dbRecordMaxRows} rows. Update this extract and try again.} datasource_preview {Results exceed {maxRows} rows. Update this connected sheet and try again.} other {Results exceed {maxRows} rows. Update this query and try again.}}")).format({objectType:XXg(a),
maxRows:Jif,dbPivotTableMaxRows:c,dbRecordMaxRows:d});return WXg(1==a?"Rows and/or columns exceed limit":"Too many rows",Iif(c,b));case 18:return WXg("Unsupported type",cZ("The query returns an ARRAY or a STRUCT type, which is currently not supported."));case 19:return w4(Lif());case 22:return w4(Mif());case 26:return w4(cZ("The column type of connected data is not compatible with the operation."));case 30:return w4(cZ("Sorting by an array column is not supported for connected sheets and extracts."));
case 32:return WXg("Too many customized number of rows & columns",cZ("Your pivot table contains one or more array database columns. Only one can have customized number of rows or columns."));case 33:return w4(cZ("Results exceed storage limit. Update query and run again."));case 35:return a=(new wB("{objectType, select, chart {A column referenced by this chart is not available.} pivot_table {A column referenced by this pivot table is not available.} formula {A column referenced by this formula is not available.} record {A column referenced by this extract is not available.} datasource_preview {The column settings do not match the data source. Try removing sorts, filters and calculated columns and try again.} other {A column referenced by this object is not available.}}")).format({objectType:XXg(a)}),
a=cZ(a),w4(a);case 34:return a=(new wB("{objectType, select, chart {A calculated column referenced by this chart no longer exists. Update and try again.} pivot_table {A calculated column referenced by this pivot table no longer exists. Update and try again.} formula {A calculated column referenced by this formula no longer exists. Update and try again.} record {A calculated column referenced by this extract no longer exists. Update and try again.} datasource_preview {A calculated column referenced by this preview no longer exists. Update and try again.} other {A calculated column referenced by this object no longer exists. Update and try again.}}")).format({objectType:XXg(a)}),
a=cZ(a),w4(a);case 38:return w4(Nif(null))}return w4(Nif(b))}function ZXg(){var a='<div class="'+U("waffle-bigquerydbsourcesettingsdialog-project-section")+'"><h3 class="'+U("waffle-bigquerydbsourcesettingsdialog-project-header")+'">';a=a+'Choose a cloud project</h3><div class="'+(U("waffle-bigquerydbsourcesettingsdialog-project-menu-wrapper")+'"></div></div>');return T(a)}
function $Xg(){var a='<div class="'+U("waffle-bigquerydbsourcesettingsdialog-footer-wrapper")+'"><p class="'+U("waffle-bigquerydbsourcesettingsdialog-footer-message")+'">';return T(a+'Your use of BigQuery is governed by the <a href="https://cloud.google.com/terms/" target="_blank">Google Cloud Platform Terms of Service</a>.</p></div>')};function aYg(a,b,c,d){iZ.call(this,"waffle-bigquerydbsourcesettingsdialog",d);d=c?"Edit data connection":"Add data connection";this.setTitle(this.oa().Aa("SPAN",void 0,d));this.J=a;this.H=b;this.F=c||null;this.D=new Ijf(void 0,this.oa());this.Fa(this.D)}t(aYg,iZ);
aYg.prototype.Aa=function(){iZ.prototype.Aa.call(this);Ry(this.Db(),ZXg);bZ(this).appendChild(Ty($Xg));this.D.render(this.bb("waffle-bigquerydbsourcesettingsdialog-project-menu-wrapper"));wX(this.D).setAttribute("placeholder","Search projects");this.oa().Pi(this.D.Ka(),!1)};aYg.prototype.Ga=function(){var a=this;iZ.prototype.Ga.call(this);this.D.Sn(!0);ujf(this.J).then(function(b){a.sb()&&(b&&0!=b.length||a.H.C(36566),bYg(a,b),a.D.Sn(!1))},function(){a.reject(!0)})};
function bYg(a,b){if(0==b.length){var c=a.oa(),d=Lp(c,VXg());P(a.Ea("waffle-bigquerydbsourcesettingsdialog-project-menu-wrapper"),!1);c.appendChild(a.Ea("waffle-bigquerydbsourcesettingsdialog-project-section"),c.Aa("DIV","waffle-bigquerydbsourcesettingsdialog-error-caption",d))}else cYg(a,b),a.getHandler().listen(a.D,"action",function(e){return dYg(a,e,b)})}
function cYg(a,b){b=eYg(b);Kjf(a.D,b);Pjf(a.D);b=a.D;var c="We are only showing the top "+(qBc.format(1E4)+" projects. Use the search bar to find unlisted projects.");b.F.setVisible(!0);b.F.C.setContent(b.oa().Aa("DIV",void 0,b.oa().Aa("DIV",{id:"waffle-dataconnector-tablepicker-filtered-menu-info-bubble-aria-content","class":"waffle-dataconnector-tablepicker-filtered-menu-info-bubble-content"},jp(Ee(c)))));Ljf(a.D)}function eYg(a){return Uc(a,function(b){return new wjf(b.getId(),b.getName())})}
function dYg(a,b,c){b=b.target.Ra();var d=b instanceof wjf?b.kS:b.getValue();Zx(a.Ka(),"waffle-bigquerydbsourcesettingsdialog-transition-out");a.D.B2("translateX(-24px)").then(function(){return a.resolve(new tjf(c,d,d,"db-source-table",a.F))})};function fYg(a){a=a.Dm;var b='<div class="'+U("waffle-calculated-columns-description")+'">';b=b+'Calculated columns let you create new columns for better analysis by using Sheets functions and the current data in your connected sheet.<div class="'+(U("waffle-calculated-columns-tooltip")+'"></div></div><div class="'+U("waffle-calculated-columns-display-name-title")+'" id="waffle-calculated-columns-display-name-title">');b=b+"Calculated column name</div>"+((a?'<div class="'+U("waffle-calculated-columns-toggle-tabs")+
" "+U("waffle-gm-sidebar")+'"></div><div class="'+U("waffle-calculated-columns-column-menu-tab")+'"></div><div class="'+U("waffle-calculated-columns-function-menu-tab")+'"></div>':"")+R(Phf({dd:"waffle-calculated-columns-display-name-input",maxLength:50}))+'<div class="'+U("waffle-calculated-columns-display-name-error")+'"></div><div class="'+U("waffle-calculated-columns-formula-editor")+'"></div>');return T(b)};function gYg(){var a=T;var b=T('<svg class="waffle-calculated-columns-tooltip-help-icon" xmlns="http://www.w3.org/2000/svg" width="18px" height="18px" viewBox="0 0 24 24" fill="#5F6368"><path fill="none" d="M0 0h24v24H0z"/><path d="M11 18h2v-2h-2v2zm1-16C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm0-14c-2.21 0-4 1.79-4 4h2c0-1.1.9-2 2-2s2 .9 2 2c0 2-3 1.75-3 5h2c0-2.25 3-2.5 3-5 0-2.21-1.79-4-4-4z"/></svg>');return a('<div class="waffle-calculated-columns-tooltip-container"><div class="waffle-calculated-columns-tooltip-help-button">'+
b+"</div></div>")};function hYg(a,b){Q.call(this,b);this.H=new Hz(void 0,gz(Fz,"waffle-calculated-columns-tooltip-help-button"),this.oa());this.Fa(this.H);this.C=new tz(this.oa());this.qa(this.C);this.D=null;this.qa(this.D);this.F=null;this.O=a;this.L=Dz(yz(new xz,1))}t(hYg,Q);
hYg.prototype.Aa=function(){this.jb(Ty(gYg));this.H.Va(this.Ea("waffle-calculated-columns-tooltip-help-button"));this.C.Lc("waffle-calculated-columns-tooltip-help-bubble");this.C.rr(!1);uz(this.C,!0);this.C.setPosition(1,2,0,-7);this.F=this.oa().Aa("A",{target:"_blank"},"Learn more");Ne(this.F,"https://connectedsheets.page.link/calccolhelp");var a="="+(ritz_api.RitzModelApi.getLocalizedFunctionName("RIGHT")+"(orderId, 4)"),b="="+(ritz_api.RitzModelApi.getLocalizedFunctionName("YEAR")+"(startDate)"),
c="="+(ritz_api.RitzModelApi.getLocalizedFunctionName("IF")+"(units > 0, total/units, 0)");this.C.setContent(this.oa().Aa("DIV",void 0,this.oa().Aa("DIV","waffle-calculated-columns-tooltip-help-bubble-title",jp(Ee("Try these formulas"))),this.oa().Aa("DIV","waffle-calculated-columns-tooltip-help-bubble-subtitle",jp(Ee("Do basic math"))),this.oa().Aa("DIV","waffle-calculated-columns-tooltip-help-bubble-example",jp(Ee("=price * quantity"))),this.oa().Aa("DIV","waffle-calculated-columns-tooltip-help-bubble-subtitle",
jp(Ee("Manipulate text"))),this.oa().Aa("DIV","waffle-calculated-columns-tooltip-help-bubble-example",jp(Ee(a))),this.oa().Aa("DIV","waffle-calculated-columns-tooltip-help-bubble-subtitle",jp(Ee("Use dates"))),this.oa().Aa("DIV","waffle-calculated-columns-tooltip-help-bubble-example",jp(Ee(b))),this.oa().Aa("DIV","waffle-calculated-columns-tooltip-help-bubble-subtitle",jp(Ee("Apply conditional logic"))),this.oa().Aa("DIV","waffle-calculated-columns-tooltip-help-bubble-example",jp(Ee(c))),this.oa().Aa("DIV",
"waffle-calculated-columns-tooltip-help-bubble-link",this.F)));this.C.render();a=this.C.Ka();this.oa().Pi(a,!0);Sx(a,"hidden",!1);this.C.setVisible(!1)};
hYg.prototype.Ga=function(){var a=this;Q.prototype.Ga.call(this);var b=this.Ea("waffle-calculated-columns-tooltip-help-button");this.C.bj(this.oa().bw(b));Vx(b,"Try these formulas");dA(b,"Support",void 0);cVe(b);this.getHandler().listen(this.H,"action",this.J).listen(this.C.getElement(),"keydown",this.R).listen(this.C,"hide",function(){return iy(a.Ka(),"waffle-calculated-columns-tooltip-help-bubble-visible")}).listen(this.F,"click",function(){a.O.C(36653,a.L)})};
hYg.prototype.R=function(a){27===a.keyCode&&(this.J(),this.Ea("waffle-calculated-columns-tooltip-help-button").focus())};hYg.prototype.J=function(){var a=!a$a(this.C.D);ky(this.Ka(),"waffle-calculated-columns-tooltip-help-bubble-visible",a);this.C.setVisible(a);Jf(this.D);a?(this.O.C(36652,this.L),this.D=new nC(this.C.Ka(),this.oa()),this.qa(this.D),oC(this.D),this.C.getElement().focus()):this.Ea("waffle-calculated-columns-tooltip-help-button").blur()};function iYg(a,b){this.D=b;this.C=new Map;jYg(this,a)}function kYg(a){return a.replace(/^[\t\r\n]+|[\t\r\n]+$/g,"").replace(/[\t\r\n]+/g," ")}function jYg(a,b){b=b.map(function(c){return fL(c)});a.C=new Map(b.map(function(c){return[QI(c,a.D),c]}))}function lYg(a){var b=[];a.C.forEach(function(c,d){Kg(c,2)||b.push(d)});return b}function mYg(a){var b=[];a.C.forEach(function(c,d){b.push(d)});return b};function nYg(a){a=a.Bkb;return T('<div class="waffle-calculated-columns-formula-editor-container"><div class="waffle-calculated-columns-formula-editor-input-container"><textarea class="'+U("waffle-calculated-columns-formula-editor-input")+'" spellcheck="false" placeholder="'+U(a)+'"></textarea></div></div>')};function oYg(a,b,c){b=c||b;return T('<div class="'+U("waffle-calculated-columns-validation-widget")+'"><div class="'+U("waffle-calculated-columns-validation-widget-open-button")+'"><div class="'+U("waffle-calculated-columns-validation-widget-spinner")+'">'+R(T_e({Vb:!0},b))+"</div>"+R(SZe())+R(jBc(null))+R(RZe())+'</div><div class="'+U("waffle-calculated-columns-validation-widget-bar")+'"><div class="'+U("waffle-calculated-columns-validation-widget-spinner")+'">'+R(T_e({Vb:!0},b))+"</div>"+R(SZe())+
R(jBc(null))+R(RZe())+'<div class="'+U("waffle-calculated-columns-validation-widget-message")+'"></div><div class="'+U("waffle-calculated-columns-validation-widget-close-button")+'">'+R(PZe(null,b))+"</div></div></div>")};function pYg(a,b,c){Q.call(this,c);this.H=a;this.L=b;this.J=Dz(yz(new xz,1));this.D=new Hz(void 0,gz(Fz,"waffle-calculated-columns-validation-widget-open-button"),this.oa());this.Fa(this.D);this.C=new Hz(void 0,gz(Fz,"waffle-calculated-columns-validation-widget-close-button"),this.oa());this.Fa(this.C);this.F=!1}t(pYg,Q);pYg.prototype.Aa=function(){this.jb(Ty(oYg));this.C.Va(this.Ea("waffle-calculated-columns-validation-widget-close-button"));this.D.Va(this.Ea("waffle-calculated-columns-validation-widget-open-button"))};
pYg.prototype.Ga=function(){var a=this;Q.prototype.Ga.call(this);this.D.Sd("Show the formula validation widget");this.C.Sd("Close the formula validation widget");this.D.Ma(this.H);this.D.setVisible(this.H);this.getHandler().listen(this.C,"action",function(){return a.setVisible(!1)}).listen(this.D,"action",function(){a.setVisible(!0);a.L.C(36654,a.J);var b=a.Ea("waffle-calculated-columns-validation-widget-message");QJ(Cp(b))});qYg(this)};
pYg.prototype.setVisible=function(a){this.F=a;this.sb()&&ky(this.Ka(),"waffle-calculated-columns-validation-widget-visible",this.F)};pYg.prototype.isVisible=g("F");
function qYg(a){iy(a.Ka(),"waffle-calculated-columns-validation-widget-valid");iy(a.Ka(),"waffle-calculated-columns-validation-widget-invalid");iy(a.Ka(),"waffle-calculated-columns-validation-widget-loading");var b="Try this example: ="+(ritz_api.RitzModelApi.getLocalizedFunctionName("ROUND")+"(<BigQueryColumnName>, 2) * 5");rYg(a,b);a.D.Sd("Show the formula validation widget")}function rYg(a,b){var c=a.Ea("waffle-calculated-columns-validation-widget-message");b=Ee(b);Le(c,b);a.F&&QJ(Cp(c))};function sYg(a,b,c,d,e,f,h,k){Q.call(this,k);this.V=a;this.xa=b;this.Ha=c;this.R=d;this.C=new KY("");this.qa(this.C);this.H=this.J=null;this.O=!1;this.F=new pYg(d,h,this.oa());this.Fa(this.F);this.Ja=f;this.ma=this.L=!1;this.Da=e;this.D=h;this.Ba=Dz(yz(new xz,1))}t(sYg,Q);m=sYg.prototype;m.Aa=function(){Q.prototype.Aa.call(this);this.jb(Ty(nYg,{Bkb:"=Write formula here"}))};
m.Ga=function(){Q.prototype.Ga.call(this);this.C.mT(255);var a=this.Ea("waffle-calculated-columns-formula-editor-input");this.C.Va(a);Sx(a,"label","Formula editor");this.J=new bC(a);this.F.render(this.Ka());this.R&&(this.H=new qy(this.C.getElement()),this.getHandler().listen(this.J,"input",this.t4).listen(this.H,"focusin",this.vZb).listen(this.H,"focusout",this.wZb));null!=this.xa&&(this.C.setValue(ritz_api.BigSheetsApi.getCalculatedColumnFormulaString((new vl).qb(this.xa),this.V)),this.R&&this.t4());
this.C.Ma(this.R)};m.vd=function(){Q.prototype.vd.call(this);Jf(this.J)};m.vZb=function(){Yx(this.Ka(),"waffle-calculated-columns-formula-editor-container-invalid")||Zx(this.Ka(),"waffle-calculated-columns-formula-editor-container-focus")};m.wZb=function(){iy(this.Ka(),"waffle-calculated-columns-formula-editor-container-focus")};
m.t4=function(){if(this.L)this.ma=!0,tYg(this);else{var a=wl(this.Da.getRitzCalculatedColumnFormulaValidationResult(this.V,uYg(this),mYg(this.Ha)),TXg);a=(new vl).Od(XK.getDescriptor(),a);switch(a.getStatus()){case 4:this.D.C(36699);break;case 12:this.D.C(36701);break;case 7:var b=new Y5d;var c=Kg(a,5)?C(a,5):"CUSTOM_OR_NON_ENGLISH_FUNCTION";b=L(b,1,c);c=new rk;b=Oj(c,27,b);b=Dz(Cz(yz(new xz,1),b));this.D.C(36700,b)}1!=a.getStatus()?(a=a.Dn(),vYg(this,!1,a)):(a=C(a,2),0==Pg(a,1).length?vYg(this,!0,
null):wYg(this,a))}};function wYg(a,b){a.L=!0;tYg(a);var c=new ifc;D(c,2,a.V);D(c,1,b);IXg(bL.getInstance(),c,a.Ja).then(function(d){d=d.Ki();3==d.getState()?(d="BigQuery error: "+d.Dn(),vYg(a,!1,d)):vYg(a,!0,null);xYg(a)},function(){vYg(a,!1,"Formula validation failed");xYg(a)})}function xYg(a){a.L=!1;a.ma&&(a.ma=!1,a.t4())}
function vYg(a,b,c){a.O=b;if("="==Cd(uYg(a)))iy(a.Ka(),"waffle-calculated-columns-formula-editor-container-invalid"),qYg(a.F);else{ky(a.Ka(),"waffle-calculated-columns-formula-editor-container-invalid",!b);b&&Np(a.oa())==a.C.getElement()&&Zx(a.Ka(),"waffle-calculated-columns-formula-editor-container-focus");var d=a.F;iy(d.Ka(),"waffle-calculated-columns-validation-widget-loading");ky(d.Ka(),"waffle-calculated-columns-validation-widget-valid",b);ky(d.Ka(),"waffle-calculated-columns-validation-widget-invalid",
!b);b?c=b="Formula is valid":(b=c,c="Formula is invalid. Click for more detail.");rYg(d,b);d.D.Sd(c)}a.dispatchEvent(new yYg("validation-update"))}function uYg(a){a=a.C.getValue();return nF(Xe(a))?a:"="+a}
function tYg(a){a.O=!1;a.dispatchEvent(new yYg("validation-update"));iy(a.Ka(),"waffle-calculated-columns-formula-editor-container-invalid");a=a.F;Zx(a.Ka(),"waffle-calculated-columns-validation-widget-loading");iy(a.Ka(),"waffle-calculated-columns-validation-widget-valid");iy(a.Ka(),"waffle-calculated-columns-validation-widget-invalid");a.F&&rYg(a,"");a.D.Sd("Show the formula validation widget")}function yYg(a,b){Ao.call(this,a,b)}t(yYg,Ao);function zYg(a,b,c){b=c||b;c=a.description;return T(R(bhf({IZ:"",match:"",HZ:a.label},b))+AYg({IZ:"",match:"",HZ:c},b))}function AYg(a){var b=a.IZ,c=a.match;a=a.HZ;return T('<span class="'+U("waffle-function-filtered-menu-item-description")+'"><span>'+R(b)+'</span><span class="'+U("waffle-function-filtered-menu-item-description-match")+'">'+R(c)+"</span><span>"+R(a)+"</span></span>")};function BYg(a,b,c){dhf.call(this,a,b,c,new CYg)}t(BYg,dhf);BYg.prototype.Ga=function(){dhf.prototype.Ga.call(this);this.Lc("waffle-function-filtered-menu-item")};BYg.prototype.Yd=function(){return this.Ra().TY};
BYg.prototype.C=function(a){a=void 0===a?"":a;var b=this.Sg();if(b){b=b.match(new RegExp(cf(a),"i"));var c=this.Yd().match(new RegExp(cf(a),"i"));this.setVisible(""===a||!!b||!!c);ehf(this,b?b.index:0,b?a.length:0);b=c?c.index:0;c=c?a.length:0;a=this.oa();c=b+c;var d=this.Yd();b=Sy(AYg,{IZ:d.substring(0,b),match:d.substring(b,c),HZ:d.substring(c,d.length)});c=a.Ea("waffle-function-filtered-menu-item-description",this.Ka());a.qC(b,c)}else this.setVisible(!a)};
function CYg(){Kz.apply(this,arguments)}t(CYg,Kz);CYg.prototype.Aa=function(a){a=a.Ra();var b=Ty(zYg,{label:a.getName(),description:a.TY});this.Ee(b,a.getName()+". "+a.TY);return b};ua(CYg);function DYg(){vX.apply(this,arguments)}t(DYg,vX);DYg.prototype.Aa=function(){vX.prototype.Aa.call(this);Zx(this.Ka(),"waffle-function-filtered-menu")};DYg.prototype.Ga=function(){vX.prototype.Ga.call(this);wX(this).setAttribute("placeholder","Search");Rz(this,!1)};DYg.prototype.hg=ba();function EYg(a,b,c,d,e){RJ.call(this,153);this.L=a;this.O=b;this.J=c||"";this.F=d;this.C=e}t(EYg,RJ);EYg.prototype.Kd=function(){var a=new uRb;D(a,1,this.L);D(a,4,this.O);D(a,3,this.J);D(a,2,this.F);for(var b=0;b<this.C.length;b++)Ng(a,5,this.C[b]);return a};function FYg(a,b,c,d,e,f,h,k,l,n){SB.call(this);this.xa=a;this.Oe=new hYg(n,this.oa());this.Fa(this.Oe);this.V=b;if(null==b)b=null;else{var q=new fh;D(q,2,b);b=q}this.ma=b;this.cb=c;this.Oa=d;this.ib=e;this.L=f;this.C=new ZT("Enter name");this.Ha=null;this.H=new sYg(a,this.ma,d,f,k,l,n,this.oa());this.Fa(this.H);this.R=this.O=this.F=null;f&&(this.F=new RY(void 0,this.oa()),this.O=new DYg(void 0,this.oa()),this.R=new XY("Columns","Functions",!0,this.oa()),this.Fa(this.F),this.Fa(this.O),this.Fa(this.R));
this.Za=h;this.Wa=n;this.Sa=Dz(yz(new xz,1))}t(FYg,SB);m=FYg.prototype;m.Ia=function(){SB.prototype.Ia.call(this)};
m.Aa=function(){SB.prototype.Aa.call(this);var a=null==this.V?"Add calculated column":this.L?"Edit calculated column":"View calculated column";this.setTitle(a);Zx(zy(this),"waffle-calculated-columns-dialog");var b=new Cy;b.set("cancel","Cancel",!1,!0);this.L&&b.set("save",null==this.V?"Add":"OK",!0,!1);Fy(this,b);Qy(this,"save");(b=l$a(this))&&Vx(b,a);a=Ty(fYg,{Dm:this.L});b=this.Db();this.oa().appendChild(b,a);this.Oe.render(this.Ea("waffle-calculated-columns-tooltip"));this.H.render(this.Ea("waffle-calculated-columns-formula-editor"))};
m.Ga=function(){SB.prototype.Ga.call(this);ky(zy(this),"waffle-calculated-columns-dialog-view-only",!this.L);var a=this.oa().Ea("waffle-calculated-columns-display-name-input");this.C.Va(a);this.C.Ma(this.L);this.Ha=new bC(a);var b=this.oa().Ea("waffle-calculated-columns-display-name-title");Sx(a,"labelledby",b.id);null!=this.ma&&(this.C.setValue(QI(this.ma,this.xa)),this.DOa());this.OCa();if(this.L){a=this.Ea("waffle-calculated-columns-column-menu-tab");this.R.D=a;a=this.Ea("waffle-calculated-columns-function-menu-tab");
this.R.F=a;this.R.render(this.Ea("waffle-calculated-columns-toggle-tabs"));this.F.render(this.Ea("waffle-calculated-columns-column-menu-tab"));this.O.render(this.Ea("waffle-calculated-columns-function-menu-tab"));wX(this.F).setAttribute("placeholder","Search");Rz(this.F,!1);a=ja(this.cb);for(b=a.next();!b.done;b=a.next())b=b.value,Kg(fL(b),2)||jhf(this.F,b,this.xa);b=Zhc(this.ib,!1,!1,!0);a=this.O;b=ja(b);for(var c=b.next();!c.done;c=b.next()){var d=c.value;c=a;var e=d.getName();d=new BYg(e,d,c.oa());
c.Fa(d,!0)}this.getHandler().listen(this,"dialogselect",this.uZb).listen(this.Ha,"input",this.DOa).listen(this.H,"validation-update",this.OCa).listen(this.F,"action",this.osb).listen(this.O,"action",this.Bxb)}};m.vd=function(){SB.prototype.vd.call(this);Jf(this.Ha)};
m.uZb=function(a){var b=this;if("save"==a.key){if(a=uYg(this.H),!Ad(a)){var c=null==this.V;a=new EYg(this.xa,kYg(this.C.getValue()),this.V,a,lYg(this.Oa));var d=c?36645:36647,e=c?36644:36646;SJ(a,function(f){b.Wa.C(f?e:d,b.Sa);f&&b.dispatchEvent(new GYg("update",b.xa,c))});this.Za.C(a)}}else"cancel"==a.key&&this.Wa.C(36643,this.Sa)};
m.osb=function(a){var b=a.target.Sg();a=this.H;b=Unc(b);var c=a.C.getElement().selectionStart,d=a.C.getElement().selectionEnd,e=a.C.getValue(),f=c+b.length;a.C.setValue(e.slice(0,c)+b+e.slice(d));a.C.getElement().setSelectionRange(f,f);a.t4();a.D.C(36732,a.Ba)};
m.Bxb=function(a){var b=a.target.getValue().getName();a=this.H;var c=a.C.getElement().selectionStart,d=a.C.getElement().selectionEnd,e=a.C.getValue();b=b+"("+e.slice(c,d)+")";e=e.slice(0,c)+b+e.slice(d);b=c+b.length;c==d&&--b;c=b;a.C.setValue(e);a.C.getElement().setSelectionRange(c,c);a.t4();a.D.C(36733,a.Ba)};
m.DOa=function(){var a=HYg(this);ky(this.C.getElement(),"waffle-calculated-columns-display-name-input-invalid",!!a);var b=a?a:"";a=this.Ea("waffle-calculated-columns-display-name-error");b=Ee(b);Le(a,b);QJ(Cp(a));this.OCa()};m.OCa=function(){var a=this.L&&!HYg(this)&&!Ue(this.C.getValue())&&this.H.O;Hy(this.D,"save",a)};
function HYg(a){if(Ue(a.C.getValue()))var b=null;else a:{b=a.Oa;var c=a.C.getValue();a=a.ma;c=kYg(c);if(Ad(c))b="Calculated column name cannot be empty";else{for(var d=ja(b.C.keys()),e=d.next();!e.done;e=d.next())if(e=e.value,zd(e,c))if(d=null!=a,b=b.C.get(e),d&&a.equals(b))break;else{b="A column named "+(c+" already exists");break a}b=null}}return b}function GYg(a,b,c){Ao.call(this,a);this.Ru=b;this.C=c}t(GYg,Ao);function IYg(){var a='<div class="'+U("waffle-dbanswers-answers-bar")+'"><div class="'+U("waffle-dbanswers-answers-bar-controls")+'"><div class="'+U("waffle-dbanswers-answers-bar-input")+'"></div><div class="'+U("waffle-dbanswers-answers-bar-enable-button")+'">';a=a+'Enable</div></div><div class="'+(U("waffle-dbanswers-answers-bar-message")+'"></div></div>');return T(a)};function JYg(){var a='<div class="'+U("waffle-dbanswers-answers-bar-enable-answers-popup")+'">',b='To perform natural language queries on this data, ask the table owner or admin to follow the <div class="'+(U("waffle-dbanswers-answers-bar-enable-answers-popup-setup-link")+'">setup instructions.</div>');return T(a+b+"</div>")};function KYg(a,b){Q.call(this,b);this.F=a;this.C=new qz;rz(this.C,0);xab(this.C,5,5,5,5);bhe(this.C,!0);this.qa(this.C);this.D=new Hz(null,new DR,this.oa());this.Fa(this.D)}t(KYg,Q);m=KYg.prototype;m.Aa=function(){var a=Ty(JYg);this.jb(a);Sx(a,"hidden",!0);P(a,!1);this.C.Dz(a);this.D.Va(this.bb("waffle-dbanswers-answers-bar-enable-answers-popup-setup-link"))};m.Ga=function(){Q.prototype.Ga.call(this);this.getHandler().listen(this.D,"action",this.EHb)};
m.bj=function(a){this.C.setPosition(new Sz(a,0,!0))};m.setVisible=function(a){this.C.setVisible(a);a&&this.D.Ka().focus()};m.isVisible=function(){return this.C.isVisible()};m.Zc=function(){this.C.Zc()};m.EHb=function(a){a.stopPropagation();a.preventDefault();a=Dz(yz(new xz,75));this.F.C(36761,a);z(y(),"docs-idu")?Se("https://sites.google.com/corp/google.com/data-qna#h.p_Vf6xbc97l9jL"):Se("https://docs.google.com/document/u/1/d/e/2PACX-1vRNytdUb20j3I6WPQXLmmIfOHkWR3a0iPg4ck1AdXzSznrW3USl3NtYGIk34sBQaxl_fSiUPclFqJK4/pub?urp=gmail_link#h.ng0zmdirli5c")};function LYg(a,b,c,d,e,f){pX.call(this,a,b,c,new cZe,"db",d,e,f);this.D="";this.O=0;this.xa=new sS(void 0,this.oa());this.Fa(this.xa);this.V=new KYg(b,this.oa());this.Fa(this.V);this.ma=null}t(LYg,pX);m=LYg.prototype;m.Fc=function(a){this.jb(a);var b=Ty(IYg);this.oa().appendChild(a,b);a=this.bb("waffle-dbanswers-answers-bar-input");this.H.render(a);this.xa.Va(this.bb("waffle-dbanswers-answers-bar-enable-button"));this.V.render();this.V.bj(this.xa.Ka())};
m.Ga=function(){pX.prototype.Ga.call(this);this.FX()};m.FX=function(){pX.prototype.FX.call(this);this.getHandler().listen(this.xa,"action",this.Ovb)};m.$F=function(){return KI(this.J.C)&&z(y(),"feda")?pX.prototype.$F.call(this):!1};m.Ma=function(a){this.sb()&&(0!=this.O&&z(y(),"fedaic")?(pX.prototype.Ma.call(this,!1),MYg(this,!0)):(MYg(this,!1),pX.prototype.Ma.call(this,a)))};m.jO=function(){pX.prototype.jO.call(this);this.V.isVisible()&&this.V.Zc()};m.jRa=function(a){vYe(a,null,this.D,this.F)};
m.I8=function(){this.D?NYg(this):this.XB();wYe(null,this.D,this.F)};m.XB=function(){pX.prototype.XB.call(this);this.D="";wYe(null,null,this.F)};m.Hba=function(){return OYg(this.O)};m.yBa=ea(!0);function PYg(a,b){a.D!=b&&(a.D=b,z(y(),"fedaic")?(a.ma&&a.ma.cancel(),a.ma=HXg(bL.getInstance(),a.D),Zp(a.ma.then(function(c){a.O=Qg(c,1);c=0==a.O;a.Ma(c);c?a.$F()&&a.I8():a.XB()},function(c){c instanceof $p||(a.O=4,a.Ma(!1),a.XB())}),function(){a.ma=null})):a.$F()&&a.I8())}
function NYg(a){if(B6e(a)){var b=a.R;b.H=a.D;SYe(b);GXg(b);b.g_([]);var c=a.J;bq(function(){a.D&&gL(c.xa,a.D,!0).then(function(d){return QYg(a,d,a.D)})},3E3)}}function QYg(a,b,c){b.forEach(function(d){var e=Sgc(d,c);if(null!=e){var f=a.R;a:{if(d.hasType())switch(d.getType()){case 1:case 2:case 4:case 5:case 6:case 7:d="$dim";break a;case 3:d="$met";break a}d="$unu"}UYe(f,e,d)}})}
function MYg(a,b){a.xa.setVisible(1==a.O);var c=a.bb("waffle-dbanswers-answers-bar-message");b=b?OYg(a.O):"";a.oa().Ne(c,b)}m.Ovb=function(){this.L.C(36760,C6e(this));this.V.setVisible(!0)};
function OYg(a){switch(a){case 1:return"The admin for this table hasn't enabled Answers yet.";case 2:return"Answers is not yet supported for data sets created by custom query.";case 3:return"The admin for this table hasn't enabled Answers yet.";case 4:return"Answers is unavailable at the moment, please try again later.";case 5:return"This data table is being setup for Answers in the background. Please try again in some time.";default:return""}};function RYg(a){var b=a.label;a=a.Zh;return T((a?'<div class="'+U("goog-menuitem-icon")+" "+U("waffle-charteditor-column-filtered-menu-item-icon")+" "+U(a)+'"></div>':"")+'<span class="'+U("waffle-datasource-configbar-columns-menu-item-label")+'">'+R(b)+"</span>")}function SYg(){return T('<div class="'+U("waffle-datasource-configbar-columns-menu-spinner-container")+'"></div>')};function TYg(a){Qz.call(this,a);this.Ae=new EW(!1);this.qa(this.Ae);this.C=new Lz(Ty(SYg),void 0,this.oa());this.C.rA(!1);this.Fa(this.C)}t(TYg,Qz);TYg.prototype.Ga=function(){Qz.prototype.Ga.call(this);Zx(this.Ka(),"waffle-datasource-configbar-columns-menu")};TYg.prototype.Aa=function(){Qz.prototype.Aa.call(this);this.C.render(this.Ka());this.Ae.render(this.C.Ea("waffle-datasource-configbar-columns-menu-spinner-container"))};
TYg.prototype.D=function(a,b){a=ja(a);for(var c=a.next();!c.done;c=a.next()){var d=c.value;c=Sgc(d,b);null!==c&&(d=hhf(d.getType()),this.Fa(new Lz(Ty(RYg,{label:c,Zh:d}),void 0,this.oa()),!0))}};function UYg(a,b){var c=a.C.getElement();c&&(ky(c,"waffle-datasource-configbar-columns-menu-loading",b),P(c,b),a.Ae.setActive(b))};function VYg(){Qz.apply(this,arguments)}t(VYg,Qz);VYg.prototype.Ga=function(){Qz.prototype.Ga.call(this);Zx(this.Ka(),"waffle-datasource-configbar-formula-menu")};VYg.prototype.AA=function(a){var b=this;this.Fa(a,!0);this.getHandler().listen(a,"action",function(){var c=new WG("insert-formula-function");c.xa=a.getValue();b.dispatchEvent(c)})};function WYg(a,b,c){b=c||b;a='<div class="'+U("waffle-dbsource-configbar-wrapper")+'"><div class="'+U("waffle-dbsource-configbar")+'"><div class="'+U("waffle-dbsource-configbar-header")+'"><div class="'+U("waffle-dbsource-configbar-header-icon")+'">'+R(QZe({color:"#5f6368",rua:24},b))+'</div><div class="waffle-dbsource-configbar-header-title" role="textbox" tabindex="0" aria-label="';a+=Fx("Connected sheet name");a+='"></div><div class="waffle-dbsource-configbar-header-subtitle"></div><div class="'+
U("waffle-dbsource-configbar-separator")+'"></div><div class="'+U("waffle-dbsource-configbar-button-wrapper")+" "+U("waffle-dbsource-configbar-refresh-options-button-wrapper")+'"></div><div class="'+U("waffle-dbsource-configbar-options-wrapper")+'"><div class="'+U("waffle-dbsource-configbar-watch-tutorial-button-wrapper")+'"></div><div class="'+U("waffle-dbsource-configbar-send-feedback-button-wrapper")+'"></div><div class="'+U("waffle-dbsource-configbar-connection-settings-button-wrapper")+'"></div></div></div><div class="'+
U("waffle-dbsource-configbar-actions")+'"><div class="'+U("waffle-dbsource-configbar-columns-menu-button-wrapper")+'"></div><div class="'+U("waffle-dbsource-configbar-button-wrapper")+" "+U("waffle-dbsource-configbar-chart-button-wrapper")+'"></div><div class="'+U("waffle-dbsource-configbar-button-wrapper")+" "+U("waffle-dbsource-configbar-pivot-button-wrapper")+'"></div><div class="'+U("waffle-dbsource-configbar-button-wrapper")+" "+U("waffle-dbsource-configbar-function-button-wrapper")+'"></div><div class="'+
U("waffle-dbsource-configbar-button-wrapper")+" "+U("waffle-dbsource-configbar-table-button-wrapper")+'"></div><div class="'+U("waffle-dbsource-configbar-button-wrapper")+" "+U("waffle-dbsource-configbar-calculated-column-button-wrapper")+'"></div><div class="'+U("waffle-dbsource-configbar-answers-wrapper")+'"></div></div></div></div>';return T(a)}
function XYg(){var a=T('<svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 18 18"><g fill="#188038" fill-rule="nonzero"><path d="M14.5263158 2C15.3368421 2 16 2.7 16 3.55555556V14.4444444C16 15.3 15.3368421 16 14.5263158 16H3.47368421C2.66315789 16 2 15.3 2 14.4444444V3.55555556C2 2.7 2.66315789 2 3.47368421 2H14.5263158zM3.5 3.5v11h11v-11h-11z"/><path d="M6.75 12.75h-1.5V7.5h1.5zM9.75 12.75h-1.5v-7.5h1.5zM12.75 12.75h-1.5v-3h1.5z"/></g></svg>');a=R(a)+"<span>";return T(a+
"Chart</span>")}function YYg(){var a=T('<svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 18 18"><path fill="#188038" fill-rule="evenodd" d="M10 13h1.185c.9975 0 1.815-.81 1.815-1.815V10h-2.25l3-3 3 3H14.5v1.185c0 1.83-1.485 3.315-3.315 3.315H10v2.25l-3-3 3-3V13zM8 6V2h6.5454545C15.3454545 2 16 2.72 16 3.6V6H8zM2 6V3.6C2 2.72 2.72 2 3.6 2H6v4H2zm1.6 10c-.88 0-1.6-.6545455-1.6-1.4545455V8h4v8H3.6z"/></svg>');a=R(a)+"<span>";return T(a+"Pivot table</span>")}
function ZYg(){var a=R(dkf())+"<span>";return T(a+"Extract</span>")}function $Yg(){var a=T('<svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 18 18"><path fill="#188038" d="M15 2H3v1.75L8.143 9 3 14.25V16h12v-2.625H7.286L11.571 9 7.286 4.625H15z"/></svg>');a=R(a)+"<span>";return T(a+"Function</span>")}
function aZg(){var a=T('<svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24"><g fill="none" fill-rule="evenodd"><path fill="#188038" d="M20 13h-7v7h-2v-7H4v-2h7V4h2v7h7v2z"/></g></svg>');a=R(a)+"<span>";return T(a+"Calculated column</span>")}
function bZg(){var a='<span class="'+U("waffle-dbsource-configbar-secondary-button-content")+'">';var b=T('<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24"><path fill="#5f6368" d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm-2-3.5l6-4.5-6-4.5z"/><path fill="none" d="M0 0h24v24H0V0z"/></svg>');a=a+R(b)+"<span>";return T(a+"Watch tutorial</span></span>")}
function cZg(){var a='<span class="'+U("waffle-dbsource-configbar-secondary-button-content")+'">';var b=T('<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24"><path fill="#5f6368" d="M20 2H4c-1.1 0-1.99.9-1.99 2L2 22l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm0 14H5.17l-.59.59-.58.58V4h16v12zm-9-4h2v2h-2zm0-6h2v4h-2z"/><path fill="none" d="M0 0h24v24H0V0z"/></svg>');a=a+R(b)+"<span>";return T(a+"Send feedback</span></span>")};function dZg(a,b,c,d,e,f,h){Q.call(this,h);this.Ba=a;this.R=b;this.xa=c;this.ib=d;this.ma=b.xa;this.cb=f;this.V=new IA;this.qa(this.V);this.C=new HO("Columns",new TYg(this.oa()),void 0,this.oa());this.C.Lc("waffle-dbsource-configbar-columns-menu-button");this.C.cj(!0);this.Fa(this.C);this.Ha=eZg(this,"waffle-dbsource-configbar-chart-button",Ty(XYg));this.Na=eZg(this,"waffle-dbsource-configbar-pivot-button",Ty(YYg));this.Da=eZg(this,"waffle-dbsource-configbar-table-button",Ty(ZYg));a=Ty($Yg);this.H=
new Yz(a,new VYg(this.oa()),lBd.getInstance(),this.oa());this.H.Lc("waffle-dbsource-configbar-function-button");this.H.cj(!0);this.H.Bp(!0);this.Fa(this.H);this.O=eZg(this,"waffle-dbsource-configbar-calculated-column-button",Ty(aZg));this.J=new GO("Refresh options");this.J.Lc("waffle-dbsource-configbar-refresh-options-button");this.J.Lc("waffle-dbsource-flat-default");this.Fa(this.J);this.Sa=eZg(this,"waffle-dbsource-configbar-secondary-button",Ty(bZg));this.Wa=eZg(this,"waffle-dbsource-configbar-secondary-button",
Ty(cZg));this.L=new GO(Ty(gC,{icon:"docs-icon-img docs-icon-settings"}),this.oa());this.L.Lc("waffle-dbsource-configbar-connection-settings-button");this.Fa(this.L);this.Za=new Map([[this.C,""],[this.Ha,"chart"],[this.Na,"pivot table"],[this.Da,"table"],[this.H,"function"],[this.O,""],[this.J,""],[this.L,""]]);this.Oa=new Map([[this.C,"fedsccm"],[this.Ha,"fedbc"],[this.Na,"fedp"],[this.Da,"fedr"],[this.H,"fedf"],[this.O,"fedcc"]]);this.Pa=new Map([[this.J,sD],[this.L,gub],[this.O,Vtb]]);this.D=null;
z(y(),"feda")&&(this.D=new LYg(this.R,this.xa,this.ib,e,75,this.oa()),this.Fa(this.D));this.Ja=this.F=null}t(dZg,Q);m=dZg.prototype;m.Aa=function(){this.jb(Ty(WYg))};
m.Ga=function(){var a=this;Q.prototype.Ga.call(this);this.C.render(this.Ea("waffle-dbsource-configbar-columns-menu-button-wrapper"));this.Ha.render(this.Ea("waffle-dbsource-configbar-chart-button-wrapper"));this.Na.render(this.Ea("waffle-dbsource-configbar-pivot-button-wrapper"));this.Da.render(this.Ea("waffle-dbsource-configbar-table-button-wrapper"));this.H.render(this.Ea("waffle-dbsource-configbar-function-button-wrapper"));this.O.render(this.Ea("waffle-dbsource-configbar-calculated-column-button-wrapper"));
this.J.render(this.Ea("waffle-dbsource-configbar-refresh-options-button-wrapper"));this.Sa.render(this.Ea("waffle-dbsource-configbar-watch-tutorial-button-wrapper"));this.Wa.render(this.Ea("waffle-dbsource-configbar-send-feedback-button-wrapper"));this.L.render(this.Ea("waffle-dbsource-configbar-connection-settings-button-wrapper"));this.D&&this.D.Va(this.Ea("waffle-dbsource-configbar-answers-wrapper"));KA(this.V,this.J,sD);KA(this.V,this.O,Vtb);KA(this.V,this.Sa,jub,fZg);KA(this.V,this.Wa,(Rt(),
Kv),fZg,function(){return{source:"big-sheets-feedback"}});KA(this.V,this.L,gub,gZg,function(){return new Rjf(hZg(a),"show-current-source")});this.F=this.Ea("waffle-dbsource-configbar-header-title");this.getHandler().listen(this.Ha,"action",this.drb).listen(this.Na,"action",this.qEb).listen(this.Da,"action",this.YJb).listen(this.H,"show",this.Ptb).listen(this.O,"action",this.Gqb).listen(this.J,"action",this.LFb).listen(this.C,"show",this.rsb).listen(this.Ba,"ua",this.NYb).listen(this.F,["focus","mousedown"],
this.hCb).listen(this.R,"external_datasource_status",this.VGb);this.getHandler().listen(this.D?this.D.getElement():this.O.Ka(),"keydown",this.yzb);z(y(),"fedsccm")||this.C.setVisible(!1);this.refresh()};m.yzb=function(a){9===a.keyCode&&(a.preventDefault(),this.dispatchEvent(new iZg))};m.setVisible=function(a){P(this.Ka(),a);if(this.D&&a){a="";var b=XP(this.Ba);b&&b.Tf()&&(a=b.Tf());PYg(this.D,a)}};m.isVisible=function(){return fx(this.Ka())};
m.refresh=function(){jZg(this,XP(this.Ba).ue());var a=this.Ea("waffle-dbsource-configbar-header-subtitle"),b=kZg(this);b?(b+=" Rows",this.oa().Ne(a,b)):this.oa().Ne(a,"");a=!BSe(this.ma,hZg(this));b=!(eL(this.R.H)||this.R.D.$g());lZg(this,b,a,this.R.Rd());this.C.Ed(!1);mZg(this);this.D&&PYg(this.D,hZg(this));this.Ja&&(cq(this.Ja),this.Ja=null)};function eZg(a,b,c){c=new sS(c,a.oa());c.Lc(b);a.Fa(c);return c}m.drb=function(){Wgc(this.ma);B5b(null,void 0,hZg(this));this.xa.C(36528,nZg())};
m.qEb=function(){Wgc(this.ma);var a=new fi,b=hZg(this);D(a,1,b);b=sYe();D(b,15,a);D(b,17,!1);a=tYe(b);a=new B1e(null,Y_b(a),void 0);v5b(a);this.xa.C(36527,nZg())};m.YJb=function(){Wgc(this.ma);E5b(hZg(this));this.xa.C(36529,nZg())};m.Ptb=function(){var a=this.H.Qb();if(a&&0==a.zc()){a=this.H.Qb();var b=Lwe(new Kwe(this.R.Sa,a,this.cb),void 0,!0);b=ja(b);for(var c=b.next();!c.done;c=b.next())a.AA(c.value)}Wgc(this.ma)};m.Gqb=function(){this.xa.C(36748,nZg())};m.LFb=function(){this.xa.C(36749,nZg())};
m.hCb=function(a){if(!this.F.isContentEditable&&!UM(this.R)){this.F.contentEditable=!0;if("focus"===a.type){a=window.getSelection();var b=document.createRange();b.selectNodeContents(this.F);a.removeAllRanges();a.addRange(b)}this.getHandler().listen(this.F,"keydown",this.MYb).listen(this.F,"blur",this.jIb)}};m.MYb=function(a){switch(a.keyCode){case 13:this.F.blur();break;case 27:oZg(this,!0)}};
m.jIb=function(){var a=this;window.getSelection().removeAllRanges();this.Ja=bq(function(){a.dispatchEvent(new pZg(XP(a.Ba).gb(),Dp(a.F)));oZg(a,!1)})};function oZg(a,b){a.F.contentEditable=!1;No(a.F,"keydown");No(a.F,"blur");b&&jZg(a,XP(a.Ba).ue())}m.rsb=function(){var a=this,b=this.C.Qb();UYg(b,!0);var c=hZg(this);gL(this.ma,c).then(function(d){mZg(a);0<d.length?b.D(d,c):(a.C.Ed(!1),a.refresh())})};m.NYb=function(a){jZg(this,a.Qm)};m.VGb=function(){null!=F_b(this.R.C)&&this.refresh()};
function jZg(a,b){var c=a.Ea("waffle-dbsource-configbar-header-title");a.oa().Ne(c,b)}
function lZg(a,b,c,d){var e=b&&!d;a.Za.forEach(function(f,h){var k=!a.Oa.has(h)||z(y(),a.Oa.get(h)),l=!a.Pa.has(h)||a.Pa.get(h).isEnabled();h==a.J?h.Ma(b&&k&&l):h!=a.L&&h.Ma(e&&c&&k&&l);k=kZg(a);var n;h.isEnabled()&&h==a.Da?n=z(y(),"femdrr")?"Insert an extract of up to 50k rows to a different sheet":"Insert an extract of up to 25k rows to a different sheet":h.isEnabled()&&h==a.O?n="Add a calculated column":h.isEnabled()&&h==a.J?n="Refresh now or schedule a refresh":h.isEnabled()&&h==a.L?n="Update connection settings":
n=h.isEnabled()&&k&&f?"Insert "+(f+(" based on "+(k+" rows"))):h.isEnabled()&&f?"Insert "+f:!h.isEnabled()&&c?"You don't have permission or access to refresh or edit analysis with this connected data.":h.isEnabled()||c?"":"There was an error fetching the database schema.";dA(h.Ka(),n,void 0);n&&Lke(h.Ka(),"waffle-dbsource-configbar-db-object-creation-button-tooltip")});a.D&&a.D.Ma(b&&c)}function hZg(a){return XP(a.Ba).Tf()}function mZg(a){a=a.C.Qb();for(UYg(a,!1);1<a.zc();)a.Pn(1,!0)}
function kZg(a){return(a=ritz_api.BigSheetsApi.getDatasourceTotalRowCount(hZg(a)))?BBc.format(parseInt(a,10)):null}function nZg(){var a=tk(new rk,!0);return Dz(Cz(yz(new xz,75),a))}function pZg(a,b){Ao.call(this,"datasheet-rename");this.Xh=a;this.name=b}t(pZg,Ao);function iZg(){Ao.call(this,"configbar-dom-focus-out")}t(iZg,Ao);var fZg={enabled:!0,selected:!0,visible:!0},gZg={enabled:!0};function qZg(a,b,c,d,e,f,h,k,l){Oo.call(this);this.D=a;this.F=b;this.R=l;this.L=c;this.ma=d;this.O=e;this.H=f;this.J=h;this.V=k;this.La=new Po(this);this.qa(this.La);this.C=null;this.La.listen(this.D,["na","Fa"],this.MQa).listen(this.D,["oa","Ea"],this.THb).listen(this.F,["acl_change","offline_status","readonly_status"],this.zob);this.MQa()}t(qZg,Oo);m=qZg.prototype;
m.MQa=function(){var a=XP(this.D);a&&HG(a)&&(this.C?this.C.refresh():(this.C=new dZg(this.D,this.F,this.L,this.ma,this.V,this.R),a=this.C.oa(),this.C.render(a.getElement("waffle-dbsource-configbar-id")),this.C.$d(this),this.La.listen(this.C,"insert-formula-function",this.JIb).listen(this.C,"datasheet-rename",this.Ftb).listen(this.C,"configbar-dom-focus-out",this.Ksb)),this.C.setVisible(!0),cre())};m.Ftb=function(a){var b=this;a=new NQc(a.Xh,a.name);SJ(a,function(c){c||oZg(b.C,!0)});this.J.C(a)};
m.Ksb=function(){gP(VJ(this.H))};m.JIb=function(a){var b=this,c=XP(this.D),d=c.Tf();if(d){var e=c.ue(),f=a.xa;GTe(this.O,function(h,k){var l=ritz_api.BigSheetsApi.getDatasourceReferenceString(e,null);tGa([gL(b.F.xa,d),dq(1E3)]).then(function(){return rZg(b,f,l,k)})},"Insert Formula");this.L.C(36535,nZg())}};
function rZg(a,b,c,d){if(d)a.F.C.bC(d.xj,function(){var f=MI(a.F.C),h=new Km(d.C,d.vk);vJ(f,h);sZg(a,b,c,h)});else{var e=new Dhe(EI(a.F.C)+1);SJ(e,function(f){f&&sZg(a,b,c,new Km)});a.J.C(e)}}function sZg(a,b,c,d){qq(BI(XJ(a.H).C,fn(d)),function(){Gje(VJ(a.H),b,c)})}m.THb=function(){this.C&&this.C.setVisible(!1)};m.zob=function(){var a=XP(this.D);a&&HG(a)&&this.C&&this.C.refresh()};m.Ia=function(){Oo.prototype.Ia.call(this);Jf(this.C)};function tZg(){var a='<div class="'+U("waffle-create-datasheet-welcome-dialog-section")+'"><img src="//ssl.gstatic.com/docs/spreadsheets/bigSheets_welcome.png" class="'+U("waffle-create-datasheet-welcome-dialog-image")+'" alt=""><h3 class="'+U("waffle-create-datasheet-welcome-dialog-welcome-message")+'"><span>';a=a+'Connect and analyze big data in Sheets</span></h3><div class="'+(U("waffle-create-datasheet-welcome-dialog-welcome-description")+'">');a=a+"Connect to BigQuery, Google's cloud data warehouse, to analyze and share billions of rows of data with your colleagues - all within Sheets</div><div class=\""+
(U("waffle-create-datasheet-welcome-dialog-button-wrapper")+'"></div></div>');return T(a)};function uZg(a){iZ.call(this,"waffle-create-datasheet-welcome-dialog",a);this.F=new sS("Learn the basics",this.oa());this.Fa(this.F);this.D=new yC("Get connected",this.oa());this.Fa(this.D)}t(uZg,iZ);m=uZg.prototype;
m.Aa=function(){iZ.prototype.Aa.call(this);Ry(this.Db(),tZg);this.F.render(this.Ea("waffle-create-datasheet-welcome-dialog-button-wrapper"));this.getHandler().listen(this.F,"action",this.OYb);this.D.render(this.Ea("waffle-create-datasheet-welcome-dialog-button-wrapper"));this.getHandler().listen(this.D,"action",this.YVa);Rx(this.Ea("waffle-dataconnector-modal-title"));var a=this.Ea("waffle-create-datasheet-welcome-dialog-welcome-message");a.id=qx(this,"waffle-create-datasheet-welcome-dialog-welcome-message");
Qx(a,"heading");Sx(this.Ka(),"labelledby",a.id);a=this.Ea("waffle-create-datasheet-welcome-dialog-welcome-description");a.id=qx(this,"waffle-create-datasheet-welcome-dialog-welcome-description");Sx(this.Ka(),"describedby",a.id)};m.OYb=function(){ux("https://connectedsheets.page.link/support")};m.YVa=function(){this.resolve(!0)};m.Eta=function(a){13==a.keyCode&&this.YVa()};m.s4=function(){itb.pb();this.reject()};m.xE=function(){itb.pb();this.reject()};function vZg(a){a=a.Lmb;a='<div class="'+U("waffle-create-datasource-sheet-loading-dialog-section")+'"><img class="'+U("waffle-create-datasource-sheet-loading-dialog-image")+'" src="'+U(Hx(a))+'" alt=""><div class="'+U("waffle-create-datasource-sheet-loading-dialog-tip")+'">';return T(a+"Connecting data\u2026</div></div>")};function wZg(a,b,c){aZ.call(this,"waffle-create-datasource-sheet-loading-dialog",c);this.F=a;this.D=b}t(wZg,aZ);wZg.prototype.Aa=function(){aZ.prototype.Aa.call(this);Ry(this.Db(),vZg,{Lmb:this.F});Rx(this.Ea("waffle-dataconnector-modal-title"));var a=this.Ea("waffle-create-datasource-sheet-loading-dialog-tip");a.id=qx(this,"waffle-create-datasource-sheet-loading-dialog-tip");Qx(a,"heading");Sx(this.Ka(),"labelledby",a.id)};wZg.prototype.Ga=function(){aZ.prototype.Ga.call(this);this.D.C(36758,xZg())};
wZg.prototype.Ia=function(){aZ.prototype.Ia.call(this);this.D.C(36759,xZg())};function xZg(){var a=tk(new rk,!0);return Dz(Cz(yz(new xz,75),a))};function yZg(){var a='<div class="'+U("waffle-create-datasource-sheet-success-dialog-section")+'"><img src="//ssl.gstatic.com/docs/spreadsheets/bigSheets_success_2.gif" class="'+U("waffle-create-datasource-sheet-success-dialog-image")+'" alt=""><h5 class="'+U("waffle-create-datasource-sheet-success-dialog-success-message")+'">';a=a+'Success! Your BigQuery data is connected and ready to analyze</h5><div class="'+(U("waffle-create-datasource-sheet-success-dialog-metadata-wrapper")+" "+U("waffle-create-datasource-sheet-success-dialog-datasource-info")+
'"></div><div class="'+U("waffle-create-datasource-sheet-success-dialog-success-description")+'">');a=a+"Create pivot tables, formulas, and charts in the same way you're already familiar with</div><div class=\""+(U("waffle-create-datasource-sheet-success-dialog-start-analyze-button-wrapper")+'"></div><div class="'+U("waffle-create-datasource-sheet-success-dialog-watch-tutorial")+" "+U("goog-link-button")+'"><span>');return T(a+"Watch video tutorial</span></div></div>")};function zZg(a,b,c){aZ.call(this,"waffle-create-datasource-sheet-success-dialog",c);this.J=a;this.H=b;this.F=new yC("Start analyzing",this.oa());this.Fa(this.F);this.D=new Hz(void 0,ON.getInstance(),this.oa());this.Fa(this.D)}t(zZg,aZ);
zZg.prototype.Aa=function(){var a=this;aZ.prototype.Aa.call(this);Ry(this.Db(),yZg);var b=this.Ea("waffle-create-datasource-sheet-success-dialog-metadata-wrapper");this.oa().Ne(b,AZg(this.J,this.H));this.F.render(this.Ea("waffle-create-datasource-sheet-success-dialog-start-analyze-button-wrapper"));this.D.Va(this.Ea("waffle-create-datasource-sheet-success-dialog-watch-tutorial"));Rx(this.Ea("waffle-dataconnector-modal-title"));b=this.Ea("waffle-create-datasource-sheet-success-dialog-success-message");
b.id=qx(this,"waffle-create-datasource-sheet-success-dialog-success-message");Qx(b,"heading");Sx(this.Ka(),"labelledby",b.id);b=this.Ea("waffle-create-datasource-sheet-success-dialog-success-description");b.id=qx(this,"waffle-create-datasource-sheet-success-dialog-success-description");Sx(this.Ka(),"describedby",b.id);this.getHandler().listen(this.F,"action",function(){return a.xE()}).listen(this.D,"action",function(){return jub.pb()})};
function AZg(a,b){a=(new wB("{NUM_COLUMNS, plural,=0 {No columns}=1 {1 column}other {# columns}}")).format({NUM_COLUMNS:a});return b?b+" rows \u2022 "+a:a};function BZg(a,b,c,d,e,f,h,k,l,n,q,r){nkf.call(this,new eif(n.getType(),l,"filter_db_sheet",r),a,b,c,d,e,f,h,k,l,q,r);this.Wa=fL(n);this.Tc=!Kg(this.Wa,2)&&Kg(n,6)&&C(n,6);this.Nc=new vl}t(BZg,nkf);m=BZg.prototype;m.Aa=function(){nkf.prototype.Aa.call(this);var a=oO(this.D,this.eh());SXg(this.H.C,500<a.left?0:3)};
m.RQa=function(){var a=this.Ra().$b(),b=ritz_api.BigSheetsApi.getDatasourceSheetCriteria(a,this.Nc.qb(this.Wa)),c=null,d=null;0<b.length&&(c=this.Nc.Od(Ch.getDescriptor(),b[0]),d=r8e(a));t8e(this.H,c,d);a=this.Da;b=this.Ja;c=this.Ra().$b();c=ritz_api.BigSheetsApi.getDatasourceSheetSortOrder(c,this.Nc.qb(this.Wa));ky(a.Ka(),"waffle-datasourcesheet-sort-selected",0==c);ky(b.Ka(),"waffle-datasourcesheet-sort-selected",1==c);a.Ma(null!=c||!this.Tc);b.Ma(null!=c||!this.Tc);a=this.C;b=a.Qb().Ka();Zx(b,
"waffle-datasourcesheet-filterbox-container");IV(a);bx(b,"");a.im()};m.rOa=function(a){if("filtering_cancelled"==a.type)this.Sa();else if(a=this.eh(),a=m8e(this.H,this.Ra().$b(),a.y,a.x,!1,!1),!W7e(this.H.C)){if(null==a)var b=new mX("filterClear");else b=new mX("filterUpdate"),b.D=a;b.Ba=this.Wa;this.dispatchEvent(b);this.Sa()}};m.Yta=function(a){var b=new mX("filterSort");b.Ba=this.Wa;b.xa=a?1:0;this.dispatchEvent(b)};m.iva=ea(!1);
m.qma=function(a){var b=this.D,c=pO(b,"r",a.y),d=b.C,e=2*d.C,f=this.Ra().Ug(a.y,a.x).getFormat();c=-c-e;a="rtl"==(f.D||null)||"auto-rtl"==(f.D||null)?e:pO(b,"c",a.x)-16*d.C-e;d=d.C;this.mA(new Km(a/d,c/d))};function CZg(a,b,c,d,e,f){d=void 0===d?null:d;e=void 0===e?!1:e;f=void 0===f?!1:f;RJ.call(this,147);this.R=a.$b();this.O=b;this.C=c||[];this.F=d;this.J=e;this.L=f}t(CZg,RJ);CZg.prototype.Kd=function(){var a=new jRb;D(a,1,this.R);D(a,7,this.O);if(this.J)D(a,5,!0);else for(var b=0;b<this.C.length;b++)Ng(a,3,this.C[b]);this.L?D(a,6,!0):null!=this.F&&D(a,4,this.F);return a};
CZg.prototype.equals=function(a){return this.R==a.R&&this.O.equals(a.O)&&this.J==a.J&&this.L==a.L&&this.F==a.F&&sd(this.C,a.C,function(b,c){return b.equals(c)})};function DZg(a,b,c,d,e,f,h){A.call(this);this.Ba=a;this.R=h;this.xa=b;this.D=c;this.ma=d;this.V=e;this.O=f;this.La=new Po(this);this.qa(this.La);this.C=null;this.F=new vl;this.H=new GA(this);this.qa(this.H);this.La.listen(this.D,"filter-triggered",this.J);this.H.subscribe(CD,"action",this.J)}t(DZg,A);
DZg.prototype.J=function(){var a=XP(this.xa);if(a&&HG(a)){var b=VJ(this.D),c=EZg(this),d=sJ(c),e=qJ(EZg(this));d=new Km(d.x,e.y);e=Pie(c,d.x);this.C&&(this.C.dispose(),this.C=null);this.C=new BZg(c,this.V,b.R,b.C,b.F,new hN(d),!1,!1,this.ma,e,this.R);this.qa(this.C);QN(oPc(b),this.C);this.La.listen(this.C,"filterClear",this.Da).listen(this.C,"filterSort",this.Ha).listen(this.C,"filterUpdate",this.L);this.C.qma(d);this.C.Qc();this.C.C.Ed(!0);b=fL(e);a=ritz_api.BigSheetsApi.getDatasourceSheetSortOrder(a.gb(),
this.F.qb(b));b=$o("waffle-autofilter-sort waffle-datasourcesheet-sort-selected");null!=a&&b&&(Vx(b,b.innerText+" selected"),ky(b,"hc-enabled-focus","black"==fA()))}};DZg.prototype.Da=function(a){a=new CZg(EZg(this),a.Ba,null,null,!0);FZg(this,a)};DZg.prototype.L=function(a){var b=new Ch;D(b,4,a.D);a=new CZg(EZg(this),a.Ba,[b],null);FZg(this,a)};
DZg.prototype.Ha=function(a){var b=EZg(this).$b(),c=a.Ba;b=ritz_api.BigSheetsApi.getDatasourceSheetSortOrder(b,this.F.qb(c));var d=!1;switch(a.xa){case 1:d=0==b;break;case 0:d=1==b}a=d?new CZg(EZg(this),c,null,null,void 0,!0):new CZg(EZg(this),c,null,1==a.xa?0:1);FZg(this,a)};function FZg(a,b){a.O.C(b);ATe(oPc(VJ(a.D)));Jf(a.C);a.C=null}function EZg(a){return MI(a.Ba.C)};function GZg(a,b,c,d,e,f,h){A.call(this);var k=this;this.La=new Po(this);this.qa(this.La);this.xa=a;this.J=a.O;this.F=b;this.C=c;this.V=e;this.R=f;this.O=new GA(this);this.qa(this.O);this.ma=h;this.H=this.D=null;HZg(this);IZg(this,d);this.L=new qo;this.qa(this.L);ro(this.L,this.J.D,function(l){var n=JZg(k);n&&CSe(l,n)&&KZg(k,n)});this.U5()}t(GZg,A);function HZg(a){var b=new Fw(["waffle-dbsheet-or-dbobject-pill-active"]);a.R.C(aub,b)}
function IZg(a,b){var c=UG(a.xa.C);a.La.listen(b,"J",a.IJb).listen(c,"Kb",a.QYb).listen(c,["tb","Gb"],a.U5).listen(a.F,"na",a.U5).listen(a.C,"activeCellChange valueChange blurEmbeddedObject embeddedObjectMouseEnter embeddedObjectMouseLeave focusEmbeddedObject".split(" "),a.U5).listen(a.C,"inputBoxActivate",a.nea).listen(a.C,"mouseover",a.PYb).listen(a.C,"refresh-db-object-request",a.hQa).listen(a.F,"oa",a.Uoa).listen(a.C,"db-connection-settings",a.xOa);a.O.subscribe(aub,"action",a.ixb)}m=GZg.prototype;
m.Ia=function(){this.Uoa();A.prototype.Ia.call(this)};m.QYb=function(){var a=VJ(this.C);a&&WJ(this.C)&&KOc(a)};m.Uoa=function(){Kf(LZg(this),MZg(this),this.D);this.H=this.D=null};m.IJb=function(){this.D&&LXg(this.D)};
m.U5=function(){var a=VJ(this.C),b=XP(this.F);if(a&&b){b=!!a.Wa;var c=!!kPc(a);b||!c||a.Wa||(a.Wa=new MXg(a.Ra(),a.R,a.C,a.F,new hN(fPc(a),new Km(0,0)),a.Da,a.Ib,a.fb),lP(a.V,"default",a.Wa,!0),a.qa(a.Wa),a.Wa.setVisible(!0));b=a.Ra();a=kPc(a)||sJ(b);(a=cJ(SI(b,a),a,b.$b()))&&(a.C||a.D)?this.nea():(a=JZg(this),(a!=this.H||NZg(this,a))&&KZg(this,a))}else this.Uoa()};
function NZg(a,b){if(!b||2!=ritz_api.BigSheetsApi.getDbObjectTypeForExternalDataSourceId(b))return!1;var c=VJ(a.C);if(!c)return!1;b=QXg(c);c=OXg(c);if(b==c)return!1;a=LZg(a);return b&&null==c&&a&&a.isVisible()&&null!=a.C.Qb()&&a.C.Qb().isVisible()?!1:!0}
function KZg(a,b){if(b){a.nea();var c=OZg(a);if(c){var d=HT(a.J,b);var e=ritz_api.BigSheetsApi.getDbObjectTypeForExternalDataSourceId(b);var f=ritz_api.BigSheetsApi.getDataSourceIdForExternalDataId(b),h=null;f&&(h=(f=ritz_api.BigSheetsApi.getDatasourceTotalRowCount(f))?parseInt(f,10):null);e=new UXg(b,e,h);HBc(c,d,e);4==e.C&&LXg(c);PZg(a,b,c,d);a.H=b}}else a.nea()}m.nea=function(){var a=LZg(this);a&&a.setVisible(!1);(a=MZg(this))&&a.setVisible(!1);this.H=null};
m.ixb=function(){var a=OZg(this);a&&(a.Ka().focus(),this.V.Ub(2))};m.hQa=function(){var a=JZg(this);if(a)switch(ritz_api.BigSheetsApi.getDbObjectTypeForExternalDataSourceId(a)){case 1:ktb.pb(a);break;case 5:ntb.pb(a);break;case 3:stb.pb(a);break;case 2:ltb.pb(a);break;case 4:eub.pb(a)}};m.xOa=function(){var a=JZg(this);if(a){var b=ritz_api.BigSheetsApi.getDataSourceIdForExternalDataId(a);b&&(a=ritz_api.BigSheetsApi.getSheetIdForDatasourceId(b))&&ZP(this.F,a,function(){gub.pb(new Rjf(b,"show-current-source"))})}};
m.PYb=function(a){var b=XP(this.F),c=VJ(this.C);c&&b&&3!=b.getSheetType()&&(a=a.yk)&&zqc(a)&&(this.U5(),KOc(c))};
function OZg(a){var b=JZg(a);if(!b)return null;var c=ritz_api.BigSheetsApi.getDbObjectTypeForExternalDataSourceId(b);if(4==c)if(3!=XP(a.F).getSheetType())a=null;else{if(!a.D){c=VJ(a.C);b=c.Te();a.D=new CBc(a.ma,b);a.La.listen(a.D,"refresh-db-object-request",a.hQa).listen(a.D,"db-connection-settings",a.xOa);c=new Px(c.Ha.J,b?5:1);a.D.render();var d=a.D;d.od=c;d.O=b}a=a.D}else if(2==c)if(a=VJ(a.C))a:if(c=a.J.C,PXg(a)==b)b=NXg(a.J).Zd().getId(),a=uPc(a,b);else{for(d=c.length-1;0<=d;d--){var e=c[d];if(e&&
ritz_api.BigSheetsApi.getExternalDataIdForObject(e)==b){a=uPc(a,e);break a}}a=null}else a=null;else a=MZg(a);return a}function LZg(a){return(a=VJ(a.C))?tPc(a):null}function MZg(a){a=VJ(a.C);return a?(a=a.Wa)?a.F:null:null}function JZg(a){return(a=VJ(a.C))?RXg(a):null}function PZg(a,b,c,d){uD.isEnabled()&&QZg(d.getType())&&(c.JN(),lie(a.J,b,function(e){return c.ax(e)},function(e){return c.OC(e)}))}function QZg(a){return"no-results"==a||"fetch-successful"==a||"fetch-failed"==a};function RZg(a,b){RJ.call(this,154);this.F=a;this.C=b}t(RZg,RJ);RZg.prototype.Kd=function(){var a=new wRb;D(a,1,this.F);for(var b=0;b<this.C.length;b++)Ng(a,2,this.C[b]);return a};function SZg(a){this.Id=Dn(a,-1,0)}t(SZg,Hn);SZg.prototype.mf=function(){return new TZg(this)};function TZg(a){Rn.call(this,a)}t(TZg,Rn);function UZg(a){this.Id=Dn(a,-1,0)}t(UZg,Hn);UZg.prototype.mf=function(){return new VZg(this)};function VZg(a){Rn.call(this,a)}t(VZg,Rn);function WZg(a){this.Id=Dn(a,-1,0)}t(WZg,Hn);WZg.prototype.mf=function(){return new XZg(this)};WZg.prototype.getFormat=function(){return this.ji(2,UZg)};WZg.prototype.getEntries=function(a){return Gn(this.Id,3,a,SZg)};function XZg(a){Rn.call(this,a)}t(XZg,Rn);XZg.prototype.getFormat=function(){return this.message.getFormat()};XZg.prototype.getEntries=function(a){return this.message.getEntries(a)};function YZg(a){this.Id=Dn(a,-1,0)}t(YZg,Hn);YZg.prototype.mf=function(){return new ZZg(this)};YZg.prototype.getName=function(){return Qn(this,1)};YZg.prototype.hasType=function(){return Kn(this,2)};YZg.prototype.getType=function(){return On(this,2,0)};function ZZg(a){Rn.call(this,a)}t(ZZg,Rn);m=ZZg.prototype;m.getName=function(){return this.message.getName()};m.bd=function(a){return Zn(this,1,a)};m.hasType=function(){return this.message.hasType()};m.getType=function(){return this.message.getType()};
m.setType=function(a){return Xn(this,2,a)};m.clearType=function(){return Tn(this,2)};m.setMode=function(a){return Xn(this,4,a)};function $Zg(a){this.Id=Dn(a,-1,0)}t($Zg,Hn);$Zg.prototype.mf=function(){return new a_g(this)};function a_g(a){Rn.call(this,a)}t(a_g,Rn);function b_g(a){this.Id=Dn(a,-1,0)}t(b_g,Hn);b_g.prototype.mf=function(){return new c_g(this)};b_g.prototype.getValue=function(a){return Gn(this.Id,2,a,$Zg)};function c_g(a){Rn.call(this,a)}t(c_g,Rn);c_g.prototype.getValue=function(a){return this.message.getValue(a)};c_g.prototype.setValue=function(a,b){return cQe(this,2,a,b)};function d_g(a){this.Id=Dn(a,-1,0)}t(d_g,Hn);d_g.prototype.mf=function(){return new e_g(this)};d_g.prototype.getColumnCount=function(){return Ln(this,1)};d_g.prototype.getColumn=function(a){return Gn(this.Id,1,a,YZg)};d_g.prototype.Iq=function(a){return Gn(this.Id,2,a,b_g)};function e_g(a){Rn.call(this,a)}t(e_g,Rn);m=e_g.prototype;m.getColumnCount=function(){return this.message.getColumnCount()};m.getColumn=function(a){return this.message.getColumn(a)};m.Iq=function(a){return this.message.Iq(a)};
m.U7=function(a){cQe(this,2,a,void 0)};m.ap=function(a){return YBa(this,2,a)};function f_g(a){this.Id=Dn(a,-1,0)}t(f_g,Hn);f_g.prototype.mf=function(){return new g_g(this)};f_g.prototype.hasValue=function(){return Kn(this,2)};f_g.prototype.getValue=function(){return this.ji(2,sSe)};function g_g(a){Rn.call(this,a)}t(g_g,Rn);g_g.prototype.hasValue=function(){return this.message.hasValue()};g_g.prototype.getValue=function(){return this.message.getValue()};g_g.prototype.setValue=function(a){return Yn(this,2,a)};function h_g(a){this.Id=Dn(a,-1,0)}t(h_g,Hn);h_g.prototype.mf=function(){return new i_g(this)};h_g.prototype.getColumnIndex=function(){return Nn(this,1)};h_g.prototype.getCellValue=function(){return this.ji(2,f_g)};function i_g(a){Rn.call(this,a)}t(i_g,Rn);i_g.prototype.getColumnIndex=function(){return this.message.getColumnIndex()};i_g.prototype.getCellValue=function(){return this.message.getCellValue()};function j_g(a){this.Id=Dn(a,-1,0)}t(j_g,Hn);j_g.prototype.mf=function(){return new k_g(this)};j_g.prototype.Fj=function(){return Nn(this,1)};j_g.prototype.hp=function(a){return Gn(this.Id,2,a,h_g)};function k_g(a){Rn.call(this,a)}t(k_g,Rn);k_g.prototype.Fj=function(){return this.message.Fj()};k_g.prototype.hp=function(a){return this.message.hp(a)};function l_g(a){this.Id=Dn(a,-1,0)}t(l_g,Hn);l_g.prototype.mf=function(){return new m_g(this)};l_g.prototype.Iq=function(a){return Gn(this.Id,3,a,j_g)};function m_g(a){Rn.call(this,a)}t(m_g,Rn);m_g.prototype.Iq=function(a){return this.message.Iq(a)};m_g.prototype.U7=function(a){cQe(this,3,a,void 0)};m_g.prototype.ap=function(a){return YBa(this,3,a)};function n_g(a,b){this.D=a;this.C=b};function o_g(a){this.D=a;this.C={}}
function p_g(a,b){b&&b.forEach(function(c){if(a.C[c]){var d=(new Date).getTime()-a.C[c].D,e=ahc(c),f=e?e.getState():null;if(e&&f&&(2==f||3==f)){if(e=q_g[f]){d=nk(new mk,1E3*d);var h=a.C[c].C;f=new E5d;f=L(f,2,h);var k=ritz_api.RitzModelApi.getExternalData(c);if(k){k=In(l_g,k);a:switch(h){case 3:var l=k.ji(6,WZg).getFormat();l=Ln(l,1)+Ln(l,2)+Ln(l,3);break a;case 6:l=Kn(k,8)?1:0;break a;default:l=k.ji(7,d_g).getColumnCount()}L(f,5,l);a:switch(h){case 3:h=k.ji(6,WZg);h=Ln(h,3);break a;case 6:h=Kn(k,
8)?1:0;break a;default:h=Ln(k.ji(7,d_g),2)}L(f,4,h)}h=new rk;f=Oj(h,16,f);f=tk(f,!0);d=Cz(Az(yz(new xz,41),d),f);a.D.C(e,Dz(d))}delete a.C[c]}}})}var r_g={},q_g=(r_g[2]=36294,r_g[3]=36567,r_g);function s_g(a,b){RJ.call(this,139);this.C=a||"";this.F=b}t(s_g,RJ);s_g.prototype.Kd=function(){var a=new PQb;D(a,1,this.C);D(a,2,this.F);return a};s_g.prototype.QG=function(){return RQb.getDescriptor()};function t_g(a,b,c,d,e,f,h,k,l,n,q,r,w){Xjf.call(this,a,b,d,f,h,k,l);var x=this;this.Pa=Vo("docs-chrome")?new qZg(b,this.F,l,q,f,c,n,d,w):null;this.qa(this.Pa);this.ib=f;this.La=new Po(this);this.qa(this.La);this.Wa=new GZg(a,b,c,d,e,k,l);this.qa(this.Wa);this.ma=n;this.Ja=a.D.C;this.Ha=new vl;this.Na=new o_g(l);this.cb=r;this.Sa=new DZg(a,b,c,l,e,n,w);this.qa(this.Sa);this.L=new Set;this.R=new Set;(b=TC.getInstance().C.newDatasourceIdFromOnboarding)?(this.L.add(b),u_g(this)):TC.getInstance().C.showBigSheetsOnboardingDialogOnStart&&
bub.isEnabled()&&this.T1a();this.La.listen(this.F,"db-execution-status-updated",this.nac).listen(this.D,"na",this.g3a);this.Da=new qo;this.qa(this.Da);ro(this.Da,a.O.D,function(F){x.g3a();v_g(x,F)})}t(t_g,Xjf);m=t_g.prototype;
m.RFa=function(a){a.C($tb,qS).D($tb,qS).C(dub,qS).C(gub,QAd).D(gub,QAd).C(tD,qS).D(tD,qS).C(eub,qS).C(ztb,QAd).C(hub,qS).C(iub,qS).C(uD,qS).C(fub,qS).C(Vtb,qS).C(Xtb,qS).C(Wtb,qS).C(jub,RAd).D(jub,RAd).C(Ytb,PAd).C(Ztb,qS).D(Ztb,qS);z(y(),"fedp")&&a.C(ktb,qS);z(y(),"fedr")&&a.C(ntb,qS);z(y(),"fedbc")&&a.C(ltb,qS);z(y(),"feci")&&a.C(mtb,qS);z(y(),"fedf")&&a.C(stb,qS);a.C(Atb,qS)};
m.I2a=function(){var a=this;this.V.subscribe(dub,"action",this.Ba).subscribe($tb,"action",this.ctb).subscribe(tD,"action",this.fLb).subscribe(gub,"action",this.Adc).subscribe(eub,"action",function(b){return w_g(a,1,b)}).subscribe(ltb,"action",function(b){return w_g(a,2,b)}).subscribe(mtb,"action",function(b){return w_g(a,6,b)}).subscribe(ntb,"action",function(b){return w_g(a,5,b)}).subscribe(ktb,"action",function(b){return w_g(a,3,b)}).subscribe(stb,"action",function(b){return w_g(a,4,b)}).subscribe(ztb,
"action",this.EIb).subscribe(hub,"action",this.oja).subscribe(iub,"action",this.U1a).subscribe(Atb,"action",function(b){if(0!==b.length){for(var c=[],d=0;d<b.length;d++){var e=b[d],f=HT(a.F.O,e).C;null!=f&&f.Il()&&37==f.getErrorCode()&&(e=ritz_api.BigSheetsApi.getDataSourceIdForExternalDataId(e),e=ritz_api.BigSheetsApi.getSheetIdForDatasourceId(e),e=AI(a.F.C,e).ue(),c.push(e))}md(c);0<c.length?(b="You do not have access to the following BigQuery connection(s): \n\n"+(c.join(", ")+" \n\n Contact the owner of the sheet or your admin to request access. \n\n"),
b=Fe(b),x_g(a,b,"Refresh failed")):(y_g(a,wl(ritz_api.BigSheetsApi.createRefreshObjectRequest(b),mla),null,b),z_g(a,b))}}).subscribe(jub,"action",this.SLb).subscribe(Vtb,"action",function(){return A_g(a,null,!0)}).subscribe(Xtb,"action",this.Dib).subscribe(Wtb,"action",this.$cb).subscribe(Ytb,"action",this.Zgc).subscribe(Ztb,"action",this.etb)};m.nac=function(a){p_g(this.Na,a.D)};m.fLb=function(a){B_g(this,a.Tf(),a.C)};
m.Adc=function(a){var b=this,c=a.Tf();if("pick-new source"==a.C)this.oja(new Eif(c,null));else{a=wl(ritz_api.BigSheetsApi.getDatasourceSlotDeltaProto(c),ig);var d=this.Ha.Od(Fh.getDescriptor(),a),e=new gZ(bL.getInstance());qq(this.J,function(f){if(z(y(),"fdcws")&&Kg(d,3)&&Kg(C(d,3),4)){var h=f.ykb(c,d);b.qa(h);$Y(b.C,h)}else if(!tD.isEnabled()&&Kg(d,3)&&Kg(C(d,3),4))h=f.xkb(c,d),b.qa(h),$Y(b.C,h);else{var k=$jf("Connecting to BigQuery\u2026");ujf(e).then(function(l){aB($A.getInstance(),k);l=f.kKa(c,
d,l);b.qa(l);$Y(b.C,l)},function(){aB($A.getInstance(),k);if(Kg(d,3)&&Kg(C(d,3),1)){var l=f.lKa(c,d,[],!0);b.qa(l);$Y(b.C,l)}else b.Lda()})}})}};m.U1a=function(a){var b=this;qq(this.J,function(c){var d=a.H,e=d?d.C:null;if(e){if(Kg(C(e,3),4)){var f=C(e,3);e=C(f,5);var h=new Fh;D(h,2,2);var k=new Gh;f=C(f,4);var l=C(f,3)||"";f=l+(l?".":"")+C(f,2)+"."+f.getName();D(k,1,"select * from `"+f+"`");D(k,5,e);D(h,3,k);e=h}c=c.kKa(d.Tf(),e,a.C)}else c=c.rkb(a,d||void 0);b.qa(c);$Y(b.C,c)})};
m.ctb=function(a){B_g(this,null,a.C)};function B_g(a,b,c){var d=null==b;c=new s_g(b,c);SJ(c,function(e,f){if(e){e=f.Tf();f=ritz_api.BigSheetsApi.generateExternalDataIdForDatasourceSheet(e);var h=wl(ritz_api.BigSheetsApi.createRefreshObjectRequestForDatasourceSheetInitialLoad(f,e),mla);y_g(a,h,1,[f]);d?(a.L.add(e),u_g(a)):gL(a.F.xa,b)}});a.ma.C(c);d||pif(a.C)}
m.T1a=function(){var a=this,b=this.F.F.F["ritz-DisplayCountBigsheetsWelcomeDialog"],c=b.getValue();if(1<=c)this.oja();else{b.setValue(Math.min(c+1,2147483647));var d=new uZg;this.qa(d);$Y(this.C,d);d.getResult().then(function(e){e?a.oja():Jf(d)},function(){Jf(d)})}};function u_g(a){var b=new wZg("//ssl.gstatic.com/docs/spreadsheets/bigsheets_loading_3.gif",a.O);a.qa(b);$Y(a.C,b)}
function A_g(a,b,c){var d=XP(a.D);if(d&&HG(d)){var e=d.Tf();gL(a.F.xa,e).then(function(f){var h=new iYg(f,e);f=new FYg(e,b,f,h,a.F.Sa,c,a.ma,a.cb,a.Ja,a.O);a.qa(f);a.La.listen(f,"update",a.Hqb);$Y(a.C,f)})}}m.Dib=function(){var a=XP(this.D);a&&HG(a)&&(a=C_g(a),A_g(this,a[0],!0))};m.Zgc=function(){var a=XP(this.D);a&&HG(a)&&(a=C_g(a),A_g(this,a[0],!1))};
m.$cb=function(){var a=this,b=XP(this.D);if(b&&HG(b)){var c=C_g(b),d=c.length;d=(new wB("{NUM_COLUMNS, plural,=1 {Are you sure you want to delete this calculated column?}other {Are you sure you want to delete {NUM_COLUMNS} calculated columns?}}")).format({NUM_COLUMNS:d});HPc(this.ib,d,function(){return D_g(a,b.Tf(),c)})}};function D_g(a,b,c){b=new RZg(b,c);SJ(b,function(d){a.O.C(d?36648:36649)});a.ma.C(b)}
m.Hqb=function(a){var b=XP(this.D);b&&HG(b)&&b.Tf()==a.Ru&&a.C&&(a=b.Hc(),b=a.Ag(),DI(a,f_b(a,zJ(a,b-1,b))))};function C_g(a){a=a.Hc();var b=oJ(a);return UAc(a,b).map(function(c){return C(c,2)})}
m.g3a=function(){var a=XP(this.D);if(a&&HG(a)){var b=a.Tf();if(this.L.has(b)){var c=ritz_api.BigSheetsApi.getExternalDataIdForDatasourceSheet(a.gb());if(c)if(c=HT(this.F.O,c),"fetch-successful"==c.getType()){a=a.Hc().Ag();var d=ritz_api.BigSheetsApi.getDatasourceTotalRowCount(b);c=null;null!==d&&(d=parseInt(d,10),0<d&&(c=BBc.format(d)));a=new zZg(a,c);this.qa(a);$Y(this.C,a,!0);this.L.delete(b)}else"fetch-failed"==c.getType()&&(oif(this.C)instanceof wZg&&qif(this.C),this.L.delete(b))}}};
m.oja=function(a){var b=this,c=new aYg(new gZ(bL.getInstance()),this.O,a);this.qa(c);$Y(this.C,c);c.getResult().then(function(d){b.U1a(d)},function(d){d&&b.Lda();Jf(c)});a=new UJ(c.getElement());P7b(a,"loadingGif","//ssl.gstatic.com/docs/spreadsheets/bigsheets_loading_3.gif");a.start()};m.Lda=function(){this.O.C(36685);bkf("Could not connect to BigQuery")};
function w_g(a,b,c){var d=HT(a.F.O,c).C;null!=d&&d.Il()&&37==d.getErrorCode()?(b=Fif(3,d),x_g(a,b,"Refresh failed")):(y_g(a,wl(ritz_api.BigSheetsApi.createRefreshObjectRequest([c]),mla),b,[c]),z_g(a,[c]))}
function y_g(a,b,c,d){b=a.Ha.Od(zec.getDescriptor(),b);var e=(new Date).getTime();KXg(a.F.O,d);JXg(bL.getInstance(),b,a.Ja).then(function(f){var h=Pg(f,2),k=1==d.length?d[0]:null;!h[0].Ki().Il()&&k&&c&&(a.Na.C[k]=new n_g(e,c));h=ja(h);for(k=h.next();!k.done;k=h.next()){var l=k.value;k=l.Ki();3===k.getState()&&(l=l.Es(),qhc(a.F.O,new Set([l]),k))}return f},function(f){var h=qhc,k=a.F.O,l=new Set(d);f=C(f,2,0);h(k,l,f.Ki())})}
function z_g(a,b){if(0!=b.length){var c=new wB("{numObjects, plural, =1 {Refreshing object} other {Refreshing # objects}}");QJ(c.format({numObjects:b.length}));b.forEach(function(d){return a.R.add(d)})}}function v_g(a,b){0!=a.R.size&&(b.C.forEach(function(c){var d=HT(a.F.O,c);"loading"!=d.getType()&&"fetching-results"!=d.getType()&&a.R.delete(c)}),0==a.R.size&&"dbobjectmodel-event-update"==b.getType()&&QJ("Refresh complete"))}
m.EIb=function(a){if(a){var b=ritz_api.BigSheetsApi.isExternalDataForDbObject(a.Es())?ritz_api.BigSheetsApi.getDbObjectTypeForExternalDataSourceId(a.Es()):0;a=YXg(b,a.C);x_g(this,a.body,a.title)}};function x_g(a,b,c){q5b(b,ba(),c,E_g,a.DYb,void 0,void 0,!1,"big-sheets-feedback")}m.SLb=function(){ux("https://connectedsheets.page.link/tutorial",{target:"_blank"})};m.DYb=function(){ux("https://connectedsheets.page.link/support")};m.etb=function(){var a=XP(this.D);a&&HG(a)&&(Wgc(this.F.xa),E5b(a.Tf()))};
var E_g={ok:"OK",cancel:"Learn more"};function F_g(){A.call(this)}t(F_g,IJ);F_g.prototype.C=function(){return t_g};MJ("dbsource",F_g);
